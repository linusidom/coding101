{% extends 'base.html' %}
{% load static %}

{% block content %}
	<!-- Page info -->
	<div class="page-info-section set-bg" data-setbg="{% static 'img/page-bg/2.jpg' %}">
		<div class="container">
			<div class="site-breadcrumb">
				<a href="{% url 'index' %}">Home</a>
				<span>Cart</span>
			</div>
		</div>
	</div>
	<!-- Page info end -->


	{% include "snippets/search_form.html" %}



	<!-- single course section -->
	<section class="single-course spad pb-0">
		<div class="container">
			<h1>Review Your Order</h1>
			{{order}}, {{order.billing_profile}}

			<table class="table table-striped table-dark text-white">
				<thead>
					<th>Course</th>
					<th>Price</th>
					<th>Short Description</th>
					<th>Total</th>
				</thead>
				<tbody>
					{% for course in cart.courses.all %}
						<tr>
							<td><a href="{% url 'courses:course_detail' course.slug %}">{{course.name}}</a></td>
							<td>{{course.price}}</td>
							<td>{{course.short_description}}</td>
							<td></td>
						</tr>
					{% endfor %}
					<tr>
						<td>Total</td>
						<td></td>
						<td></td>
						<td>{{order.total}}</td>
					</tr>
				</tbody>
			</table>
			
			{% if not card %}
				<p>Please add a card</p>
				{% include 'cards/snippets/card_form.html' %}
			{% elif not card_accepted %}
				
				
				<div class="row">
					<div class="col">
						<form method="POST">
							{% csrf_token %}
							<p>Would you like to use this card {{card.last_digits}} or add another one?</p>
							<input type="hidden" name="card_accepted" value="True">
							<input type="submit" value="Yes">
						</form>
					</div>
					<div class="col">OR</div>
					<div class="col">
						{% include 'cards/snippets/card_form.html' %}
					</div>
				</div>
				
			{% else %}
				<a class='site-btn' href="{% url 'carts:place_order' %}">Ready to Place Your Order</a>
			{% endif %}
		</div>
	</section>

{% endblock %}




















