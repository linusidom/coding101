{% extends 'base.html' %}
{% load static %}

{% block content %}
	<!-- Page info -->
	<div class="page-info-section set-bg" data-setbg="{% static 'img/page-bg/2.jpg' %}">
		<div class="container">
			<div class="site-breadcrumb">
				<a href="{% url 'index' %}">Home</a>
				<span>Course Detail</span>
			</div>
		</div>
	</div>
	<!-- Page info end -->


	{% include "snippets/search_form.html" %}



	<!-- single course section -->
	<section class="single-course spad pb-0">
		<div class="container">
			<div class="course-meta-area">
				<div class="row">
					<div class="col-lg-10 offset-lg-1">
						<div class="course-note">Featured Course</div>
						<h3>{{course.name}}</h3>
						<div class="course-metas">
							<div class="course-meta">
								<div class="course-author">
									<div class="ca-pic set-bg" data-setbg="
									{% if course.user.profile.image %}
										{{course.user.profile.image.url}}
									{% else %}
										{% static 'img/authors/2.jpg' %}
									{% endif %}
									

									"></div>
									<h6>Teacher</h6>
									<p>{{course.user.first_name}} {{course.user.last_name}}<span> {{course.get_category_name}}</span></p>
								</div>
							</div>
							<div class="course-meta">
								<div class="cm-info">
									<h6>Category</h6>
									<p>{{course.get_category_name}}</p>
								</div>
							</div>
							<div class="course-meta">
								<div class="cm-info">
									<h6>Students</h6>
									<p>{{course.number_of_students}} Registered Students</p>
								</div>
							</div>
							<div class="course-meta">
								<div class="cm-info">
									<h6>Reviews</h6>
									<p>2 Reviews <span class="rating">
										<i class="fa fa-star"></i>
										<i class="fa fa-star"></i>
										<i class="fa fa-star"></i>
										<i class="fa fa-star"></i>
										<i class="fa fa-star is-fade"></i>
									</span></p>
								</div>
							</div>
						</div>
						{% if user == course.user %}
							<a href="{% url 'courses:course_update' course.slug %}" class="site-btn price-btn">Update</a>
							<a href="{% url 'courses:course_delete' course.slug %}" class="site-btn buy-btn">Delete</a>
						{% else %}
							<a href="#" class="site-btn price-btn">Price: ${{course.price}}</a>
							<a href="#" class="site-btn buy-btn">Buy This Course</a>
						{% endif %}
					</div>
				</div>
			</div>
			<img src="
				{% if course.image %}
					{{course.image.url}}
				{% else %}
					{% static 'img/courses/single.jpg' %}
				{% endif %}
			" alt="" class="course-preview">
			<div class="row">
				<div class="col-lg-10 offset-lg-1 course-list">
					<div class="cl-item">
						<h4>Course Description</h4>
						<p>{{course.long_description | safe }} </p>
					</div>
					<div class="cl-item">
						<h4>Certification</h4>
						<p>{{course.certification | safe}}</p>
					</div>
					<div class="cl-item">
						<h4>The Instructor</h4>
						<p>TODO IN THE PROFILE OF THE DEVELOPER</p>
					</div>
				</div>
			</div>


			<div>
				<h4>Lessons</h4>
				<hr>
				<a href="{% url 'lessons:lesson_create' course.slug %}">Add Lesson</a>
				<hr>
				{% for lesson in course.lesson_set.all %}
					<div class="card my-3">
						
						<div class="card-header">
							<a href="{% url 'lessons:lesson_detail' lesson.slug %}">
								<p><span class='font-weight-bold text-primary'>{{forloop.counter}}.</span> {{lesson.name}}</p>
								<p>{{lesson.short_description}}</p>
							</a>
						</div>
						<div class="card-body">
							{{lesson.long_description | safe}}
						</div>
						
					</div>
					
				{% endfor %}

			</div>
		</div>
	</section>
	<!-- single course section end -->


	<!-- Page -->

<!-- We want to show courses in the same category as this course detail -->

	<section class="realated-courses spad">
		<div class="course-warp">
			<h2 class="rc-title">Realated Courses</h2>
			<div class="rc-slider owl-carousel">
				<!-- course -->
				{% for course in course_list %}
					<a href="{% url 'courses:course_detail' course.slug %}">
						<div class="course-item">
							<div class="course-thumb set-bg" data-setbg="{% static 'img/courses/1.jpg' %}">
								<div class="price">Price: ${{course.price}}</div>
							</div>
							<div class="course-info">
								<div class="course-text">
									<h5>{{course.name}}</h5>
									<p>{{course.short_description}}</p>
									<div class="students">{{course.number_of_students}} Students</div>
								</div>
								<div class="course-author">
									<div class="ca-pic set-bg" data-setbg="{% static 'img/authors/1.jpg' %}"></div>
									<p>{{course.user.first_name}} {{course.user.last_name}}, <span>Developer</span></p>
								</div>
							</div>
						</div>
					</a>
				{% endfor %}
				<!-- course -->
				
			</div>
		</div>
	</section>
	<!-- Page end -->
{% endblock %}